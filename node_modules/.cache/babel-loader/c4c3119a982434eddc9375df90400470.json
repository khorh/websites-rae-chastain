{"ast":null,"code":"import _asyncToGenerator from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _objectSpread from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/@babel/runtime/regenerator/index.js\";\n\n/*!\n * storyblok-js-client v0.0.0-development\n * Universal JavaScript SDK for Storyblok's API\n * (c) 2020-2022 Stobylok Team\n */\nimport t from \"axios\";\n\nfunction e(t) {\n  return \"number\" == typeof t && t == t && t !== 1 / 0 && t !== -1 / 0;\n}\n\nfunction r(t, r, s) {\n  if (!e(r)) throw new TypeError(\"Expected `limit` to be a finite number\");\n  if (!e(s)) throw new TypeError(\"Expected `interval` to be a finite number\");\n\n  var n = [],\n      i = [],\n      o = 0,\n      a = function a() {\n    o++;\n    var e = setTimeout(function () {\n      o--, n.length > 0 && a(), i = i.filter(function (t) {\n        return t !== e;\n      });\n    }, s);\n    i.indexOf(e) < 0 && i.push(e);\n    var r = n.shift();\n    r.resolve(t.apply(r.self, r.args));\n  },\n      l = function l() {\n    var t = arguments,\n        e = this;\n    return new Promise(function (s, i) {\n      n.push({\n        resolve: s,\n        reject: i,\n        args: t,\n        self: e\n      }), o < r && a();\n    });\n  };\n\n  return l.abort = function () {\n    i.forEach(clearTimeout), i = [], n.forEach(function (t) {\n      t.reject(new throttle.AbortError());\n    }), n.length = 0;\n  }, l;\n}\n\nr.AbortError = function () {\n  Error.call(this, \"Throttled function aborted\"), this.name = \"AbortError\";\n};\n\nvar s = function s(t, e) {\n  if (!t) return null;\n  var r = {};\n\n  for (var _s in t) {\n    var _n = t[_s];\n    e.indexOf(_s) > -1 && null !== _n && (r[_s] = _n);\n  }\n\n  return r;\n};\n\nvar n = {\n  nodes: {\n    horizontal_rule: function horizontal_rule(t) {\n      return {\n        singleTag: \"hr\"\n      };\n    },\n    blockquote: function blockquote(t) {\n      return {\n        tag: \"blockquote\"\n      };\n    },\n    bullet_list: function bullet_list(t) {\n      return {\n        tag: \"ul\"\n      };\n    },\n    code_block: function code_block(t) {\n      return {\n        tag: [\"pre\", {\n          tag: \"code\",\n          attrs: t.attrs\n        }]\n      };\n    },\n    hard_break: function hard_break(t) {\n      return {\n        singleTag: \"br\"\n      };\n    },\n    heading: function heading(t) {\n      return {\n        tag: \"h\".concat(t.attrs.level)\n      };\n    },\n    image: function image(t) {\n      return {\n        singleTag: [{\n          tag: \"img\",\n          attrs: s(t.attrs, [\"src\", \"alt\", \"title\"])\n        }]\n      };\n    },\n    list_item: function list_item(t) {\n      return {\n        tag: \"li\"\n      };\n    },\n    ordered_list: function ordered_list(t) {\n      return {\n        tag: \"ol\"\n      };\n    },\n    paragraph: function paragraph(t) {\n      return {\n        tag: \"p\"\n      };\n    }\n  },\n  marks: {\n    bold: function bold() {\n      return {\n        tag: \"b\"\n      };\n    },\n    strike: function strike() {\n      return {\n        tag: \"strike\"\n      };\n    },\n    underline: function underline() {\n      return {\n        tag: \"u\"\n      };\n    },\n    strong: function strong() {\n      return {\n        tag: \"strong\"\n      };\n    },\n    code: function code() {\n      return {\n        tag: \"code\"\n      };\n    },\n    italic: function italic() {\n      return {\n        tag: \"i\"\n      };\n    },\n    link: function link(t) {\n      var e = _objectSpread({}, t.attrs),\n          _t$attrs$linktype = t.attrs.linktype,\n          r = _t$attrs$linktype === void 0 ? \"url\" : _t$attrs$linktype;\n\n      return \"email\" === r && (e.href = \"mailto:\".concat(e.href)), e.anchor && (e.href = \"\".concat(e.href, \"#\").concat(e.anchor), delete e.anchor), {\n        tag: [{\n          tag: \"a\",\n          attrs: e\n        }]\n      };\n    },\n    styled: function styled(t) {\n      return {\n        tag: [{\n          tag: \"span\",\n          attrs: t.attrs\n        }]\n      };\n    }\n  }\n};\n\nvar i = /*#__PURE__*/function () {\n  function i(t) {\n    _classCallCheck(this, i);\n\n    t || (t = n), this.marks = t.marks || [], this.nodes = t.nodes || [];\n  }\n\n  _createClass(i, [{\n    key: \"addNode\",\n    value: function addNode(t, e) {\n      this.nodes[t] = e;\n    }\n  }, {\n    key: \"addMark\",\n    value: function addMark(t, e) {\n      this.marks[t] = e;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (t.content && Array.isArray(t.content)) {\n        var _e = \"\";\n        return t.content.forEach(function (t) {\n          _e += _this.renderNode(t);\n        }), _e;\n      }\n\n      return console.warn(\"The render method must receive an object with a content field, which is an array\"), \"\";\n    }\n  }, {\n    key: \"renderNode\",\n    value: function renderNode(t) {\n      var _this2 = this;\n\n      var e = [];\n      t.marks && t.marks.forEach(function (t) {\n        var r = _this2.getMatchingMark(t);\n\n        r && e.push(_this2.renderOpeningTag(r.tag));\n      });\n      var r = this.getMatchingNode(t);\n      return r && r.tag && e.push(this.renderOpeningTag(r.tag)), t.content ? t.content.forEach(function (t) {\n        e.push(_this2.renderNode(t));\n      }) : t.text ? e.push(function (t) {\n        var e = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#39;\"\n        },\n            r = /[&<>\"']/g,\n            s = RegExp(r.source);\n        return t && s.test(t) ? t.replace(r, function (t) {\n          return e[t];\n        }) : t;\n      }(t.text)) : r && r.singleTag ? e.push(this.renderTag(r.singleTag, \" /\")) : r && r.html && e.push(r.html), r && r.tag && e.push(this.renderClosingTag(r.tag)), t.marks && t.marks.slice(0).reverse().forEach(function (t) {\n        var r = _this2.getMatchingMark(t);\n\n        r && e.push(_this2.renderClosingTag(r.tag));\n      }), e.join(\"\");\n    }\n  }, {\n    key: \"renderTag\",\n    value: function renderTag(t, e) {\n      if (t.constructor === String) return \"<\".concat(t).concat(e, \">\");\n      return t.map(function (t) {\n        if (t.constructor === String) return \"<\".concat(t).concat(e, \">\");\n        {\n          var _r = \"<\".concat(t.tag);\n\n          if (t.attrs) for (var _e2 in t.attrs) {\n            var _s2 = t.attrs[_e2];\n            null !== _s2 && (_r += \" \".concat(_e2, \"=\\\"\").concat(_s2, \"\\\"\"));\n          }\n          return \"\".concat(_r).concat(e, \">\");\n        }\n      }).join(\"\");\n    }\n  }, {\n    key: \"renderOpeningTag\",\n    value: function renderOpeningTag(t) {\n      return this.renderTag(t, \"\");\n    }\n  }, {\n    key: \"renderClosingTag\",\n    value: function renderClosingTag(t) {\n      if (t.constructor === String) return \"</\".concat(t, \">\");\n      return t.slice(0).reverse().map(function (t) {\n        return t.constructor === String ? \"</\".concat(t, \">\") : \"</\".concat(t.tag, \">\");\n      }).join(\"\");\n    }\n  }, {\n    key: \"getMatchingNode\",\n    value: function getMatchingNode(t) {\n      if (\"function\" == typeof this.nodes[t.type]) return this.nodes[t.type](t);\n    }\n  }, {\n    key: \"getMatchingMark\",\n    value: function getMatchingMark(t) {\n      if (\"function\" == typeof this.marks[t.type]) return this.marks[t.type](t);\n    }\n  }]);\n\n  return i;\n}();\n\nvar o = function o() {\n  var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;\n  var r = Math.abs(e - t) || 0,\n      s = t < e ? 1 : -1;\n  return function () {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var e = arguments.length > 1 ? arguments[1] : undefined;\n    return _toConsumableArray(Array(t)).map(e);\n  }(r, function (e, r) {\n    return r * s + t;\n  });\n},\n    a = function a(t, e, r) {\n  var s = [];\n\n  for (var _n2 in t) {\n    if (!Object.prototype.hasOwnProperty.call(t, _n2)) continue;\n\n    var _i = t[_n2],\n        _o = r ? \"\" : encodeURIComponent(_n2);\n\n    var _l = void 0;\n\n    _l = \"object\" == typeof _i ? a(_i, e ? e + encodeURIComponent(\"[\" + _o + \"]\") : _o, Array.isArray(_i)) : (e ? e + encodeURIComponent(\"[\" + _o + \"]\") : _o) + \"=\" + encodeURIComponent(_i), s.push(_l);\n  }\n\n  return s.join(\"&\");\n};\n\nvar l = {},\n    c = {};\n\nvar h = /*#__PURE__*/function () {\n  function h(e, s) {\n    _classCallCheck(this, h);\n\n    if (!s) {\n      var _t = e.region ? \"-\".concat(e.region) : \"\",\n          _r2 = !1 === e.https ? \"http\" : \"https\";\n\n      s = void 0 === e.oauthToken ? \"\".concat(_r2, \"://api\").concat(_t, \".storyblok.com/v2\") : \"\".concat(_r2, \"://api\").concat(_t, \".storyblok.com/v1\");\n    }\n\n    var n = Object.assign({}, e.headers),\n        o = 5;\n    void 0 !== e.oauthToken && (n.Authorization = e.oauthToken, o = 3), void 0 !== e.rateLimit && (o = e.rateLimit), this.richTextResolver = new i(e.richTextSchema), \"function\" == typeof e.componentResolver && this.setComponentResolver(e.componentResolver), this.maxRetries = e.maxRetries || 5, this.throttle = r(this.throttledRequest, o, 1e3), this.accessToken = e.accessToken, this.relations = {}, this.links = {}, this.cache = e.cache || {\n      clear: \"manual\"\n    }, this.client = t.create({\n      baseURL: s,\n      timeout: e.timeout || 0,\n      headers: n,\n      proxy: e.proxy || !1\n    }), e.responseInterceptor && this.client.interceptors.response.use(function (t) {\n      return e.responseInterceptor(t);\n    }), this.resolveNestedRelations = e.resolveNestedRelations || !0;\n  }\n\n  _createClass(h, [{\n    key: \"setComponentResolver\",\n    value: function setComponentResolver(t) {\n      this.richTextResolver.addNode(\"blok\", function (e) {\n        var r = \"\";\n        return e.attrs.body.forEach(function (e) {\n          r += t(e.component, e);\n        }), {\n          html: r\n        };\n      });\n    }\n  }, {\n    key: \"parseParams\",\n    value: function parseParams() {\n      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return t.version || (t.version = \"published\"), t.token || (t.token = this.getToken()), t.cv || (t.cv = c[t.token]), Array.isArray(t.resolve_relations) && (t.resolve_relations = t.resolve_relations.join(\",\")), t;\n    }\n  }, {\n    key: \"factoryParamOptions\",\n    value: function factoryParamOptions(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return function () {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        return t.indexOf(\"/cdn/\") > -1;\n      }(t) ? this.parseParams(e) : e;\n    }\n  }, {\n    key: \"makeRequest\",\n    value: function makeRequest(t, e, r, s) {\n      var n = this.factoryParamOptions(t, function () {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 25;\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        return _objectSpread(_objectSpread({}, t), {}, {\n          per_page: e,\n          page: r\n        });\n      }(e, r, s));\n      return this.cacheResponse(t, n);\n    }\n  }, {\n    key: \"get\",\n    value: function get(t, e) {\n      var r = \"/\".concat(t);\n      var s = this.factoryParamOptions(r, e);\n      return this.cacheResponse(r, s);\n    }\n  }, {\n    key: \"getAll\",\n    value: function () {\n      var _getAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(t) {\n        var _this3 = this;\n\n        var e,\n            r,\n            s,\n            n,\n            i,\n            a,\n            l,\n            _args3 = arguments;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {};\n                r = _args3.length > 2 ? _args3[2] : undefined;\n                s = e.per_page || 25, n = \"/\".concat(t), i = n.split(\"/\");\n                r = r || i[i.length - 1];\n                _context3.next = 6;\n                return this.makeRequest(n, e, s, 1);\n\n              case 6:\n                a = _context3.sent;\n                l = Math.ceil(a.total / s);\n\n                _context3.t0 = function () {\n                  var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n                  var e = arguments.length > 1 ? arguments[1] : undefined;\n                  return t.map(e).reduce(function (t, e) {\n                    return [].concat(_toConsumableArray(t), _toConsumableArray(e));\n                  }, []);\n                };\n\n                _context3.t1 = [a];\n                _context3.t2 = _toConsumableArray;\n                _context3.next = 13;\n                return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                  var t,\n                      e,\n                      _args = arguments;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          t = _args.length > 0 && _args[0] !== undefined ? _args[0] : [];\n                          e = _args.length > 1 ? _args[1] : undefined;\n                          return _context.abrupt(\"return\", Promise.all(t.map(e)));\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }))(o(1, l), /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(t) {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            return _context2.abrupt(\"return\", _this3.makeRequest(n, e, s, t + 1));\n\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n\n              case 13:\n                _context3.t3 = _context3.sent;\n                _context3.t4 = (0, _context3.t2)(_context3.t3);\n                _context3.t5 = _context3.t1.concat.call(_context3.t1, _context3.t4);\n\n                _context3.t6 = function (t) {\n                  return Object.values(t.data[r]);\n                };\n\n                return _context3.abrupt(\"return\", (0, _context3.t0)(_context3.t5, _context3.t6));\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getAll(_x) {\n        return _getAll.apply(this, arguments);\n      }\n\n      return getAll;\n    }()\n  }, {\n    key: \"post\",\n    value: function post(t, e) {\n      var r = \"/\".concat(t);\n      return this.throttle(\"post\", r, e);\n    }\n  }, {\n    key: \"put\",\n    value: function put(t, e) {\n      var r = \"/\".concat(t);\n      return this.throttle(\"put\", r, e);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(t, e) {\n      var r = \"/\".concat(t);\n      return this.throttle(\"delete\", r, e);\n    }\n  }, {\n    key: \"getStories\",\n    value: function getStories(t) {\n      return this.get(\"cdn/stories\", t);\n    }\n  }, {\n    key: \"getStory\",\n    value: function getStory(t, e) {\n      return this.get(\"cdn/stories/\".concat(t), e);\n    }\n  }, {\n    key: \"setToken\",\n    value: function setToken(t) {\n      this.accessToken = t;\n    }\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      return this.accessToken;\n    }\n  }, {\n    key: \"_cleanCopy\",\n    value: function _cleanCopy(t) {\n      return JSON.parse(JSON.stringify(t));\n    }\n  }, {\n    key: \"_insertLinks\",\n    value: function _insertLinks(t, e) {\n      var r = t[e];\n      r && \"multilink\" == r.fieldtype && \"story\" == r.linktype && \"string\" == typeof r.id && this.links[r.id] ? r.story = this._cleanCopy(this.links[r.id]) : r && \"story\" === r.linktype && \"string\" == typeof r.uuid && this.links[r.uuid] && (r.story = this._cleanCopy(this.links[r.uuid]));\n    }\n  }, {\n    key: \"_insertRelations\",\n    value: function _insertRelations(t, e, r) {\n      var _this4 = this;\n\n      if (r.indexOf(t.component + \".\" + e) > -1) if (\"string\" == typeof t[e]) this.relations[t[e]] && (t[e] = this._cleanCopy(this.relations[t[e]]));else if (t[e].constructor === Array) {\n        var _r3 = [];\n        t[e].forEach(function (t) {\n          _this4.relations[t] && _r3.push(_this4._cleanCopy(_this4.relations[t]));\n        }), t[e] = _r3;\n      }\n    }\n  }, {\n    key: \"iterateTree\",\n    value: function iterateTree(t, e) {\n      var _this5 = this;\n\n      var r = function r(t) {\n        if (null != t) if (t.constructor === Array) for (var _e3 = 0; _e3 < t.length; _e3++) {\n          r(t[_e3]);\n        } else if (t.constructor === Object) {\n          if (t._stopResolving) return;\n\n          for (var _s3 in t) {\n            (t.component && t._uid || \"link\" === t.type) && (_this5._insertRelations(t, _s3, e), _this5._insertLinks(t, _s3)), r(t[_s3]);\n          }\n        }\n      };\n\n      r(t.content);\n    }\n  }, {\n    key: \"resolveLinks\",\n    value: function () {\n      var _resolveLinks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(t, e) {\n        var _this6 = this;\n\n        var r, _s4, _n3, _i2, _e4, _r4, _t2;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                r = [];\n\n                if (!t.link_uuids) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                _s4 = t.link_uuids.length;\n                _n3 = [];\n                _i2 = 50;\n\n                for (_e4 = 0; _e4 < _s4; _e4 += _i2) {\n                  _r4 = Math.min(_s4, _e4 + _i2);\n\n                  _n3.push(t.link_uuids.slice(_e4, _r4));\n                }\n\n                _t2 = 0;\n\n              case 7:\n                if (!(_t2 < _n3.length)) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.next = 10;\n                return this.getStories({\n                  per_page: _i2,\n                  language: e.language,\n                  version: e.version,\n                  by_uuids: _n3[_t2].join(\",\")\n                });\n\n              case 10:\n                _context4.sent.data.stories.forEach(function (t) {\n                  r.push(t);\n                });\n\n              case 11:\n                _t2++;\n                _context4.next = 7;\n                break;\n\n              case 14:\n                _context4.next = 17;\n                break;\n\n              case 16:\n                r = t.links;\n\n              case 17:\n                r.forEach(function (t) {\n                  _this6.links[t.uuid] = _objectSpread(_objectSpread({}, t), {}, {\n                    _stopResolving: !0\n                  });\n                });\n\n              case 18:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function resolveLinks(_x3, _x4) {\n        return _resolveLinks.apply(this, arguments);\n      }\n\n      return resolveLinks;\n    }()\n  }, {\n    key: \"resolveRelations\",\n    value: function () {\n      var _resolveRelations = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(t, e) {\n        var _this7 = this;\n\n        var r, _s5, _n4, _i3, _e5, _r5, _t3;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                r = [];\n\n                if (!t.rel_uuids) {\n                  _context5.next = 16;\n                  break;\n                }\n\n                _s5 = t.rel_uuids.length;\n                _n4 = [];\n                _i3 = 50;\n\n                for (_e5 = 0; _e5 < _s5; _e5 += _i3) {\n                  _r5 = Math.min(_s5, _e5 + _i3);\n\n                  _n4.push(t.rel_uuids.slice(_e5, _r5));\n                }\n\n                _t3 = 0;\n\n              case 7:\n                if (!(_t3 < _n4.length)) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                _context5.next = 10;\n                return this.getStories({\n                  per_page: _i3,\n                  language: e.language,\n                  version: e.version,\n                  by_uuids: _n4[_t3].join(\",\")\n                });\n\n              case 10:\n                _context5.sent.data.stories.forEach(function (t) {\n                  r.push(t);\n                });\n\n              case 11:\n                _t3++;\n                _context5.next = 7;\n                break;\n\n              case 14:\n                _context5.next = 17;\n                break;\n\n              case 16:\n                r = t.rels;\n\n              case 17:\n                r.forEach(function (t) {\n                  _this7.relations[t.uuid] = _objectSpread(_objectSpread({}, t), {}, {\n                    _stopResolving: !0\n                  });\n                });\n\n              case 18:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function resolveRelations(_x5, _x6) {\n        return _resolveRelations.apply(this, arguments);\n      }\n\n      return resolveRelations;\n    }()\n  }, {\n    key: \"resolveStories\",\n    value: function () {\n      var _resolveStories = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(t, e) {\n        var _this8 = this;\n\n        var r, _t4;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                r = [];\n                _context6.t0 = void 0 !== e.resolve_relations && e.resolve_relations.length > 0;\n\n                if (!_context6.t0) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                r = e.resolve_relations.split(\",\");\n                _context6.next = 6;\n                return this.resolveRelations(t, e);\n\n              case 6:\n                _context6.t1 = [\"1\", \"story\", \"url\"].indexOf(e.resolve_links) > -1;\n\n                if (!_context6.t1) {\n                  _context6.next = 10;\n                  break;\n                }\n\n                _context6.next = 10;\n                return this.resolveLinks(t, e);\n\n              case 10:\n                if (!this.resolveNestedRelations) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                for (_t4 in this.relations) {\n                  this.iterateTree(this.relations[_t4], r);\n                }\n\n              case 12:\n                t.story ? this.iterateTree(t.story, r) : t.stories.forEach(function (t) {\n                  _this8.iterateTree(t, r);\n                });\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function resolveStories(_x7, _x8) {\n        return _resolveStories.apply(this, arguments);\n      }\n\n      return resolveStories;\n    }()\n  }, {\n    key: \"cacheResponse\",\n    value: function cacheResponse(t, e, r) {\n      var _this9 = this;\n\n      return void 0 === r && (r = 0), new Promise( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(s, n) {\n          var i, o, _t5, _r6, _l2, l;\n\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  i = a({\n                    url: t,\n                    params: e\n                  }), o = _this9.cacheProvider();\n                  _context7.t0 = \"auto\" === _this9.cache.clear && \"draft\" === e.version;\n\n                  if (!_context7.t0) {\n                    _context7.next = 5;\n                    break;\n                  }\n\n                  _context7.next = 5;\n                  return _this9.flushCache();\n\n                case 5:\n                  if (!(\"published\" === e.version && \"/cdn/spaces/me\" != t)) {\n                    _context7.next = 11;\n                    break;\n                  }\n\n                  _context7.next = 8;\n                  return o.get(i);\n\n                case 8:\n                  _t5 = _context7.sent;\n\n                  if (!_t5) {\n                    _context7.next = 11;\n                    break;\n                  }\n\n                  return _context7.abrupt(\"return\", s(_t5));\n\n                case 11:\n                  _context7.prev = 11;\n                  _context7.next = 14;\n                  return _this9.throttle(\"get\", t, {\n                    params: e,\n                    paramsSerializer: function paramsSerializer(t) {\n                      return a(t);\n                    }\n                  });\n\n                case 14:\n                  _r6 = _context7.sent;\n                  _l2 = {\n                    data: _r6.data,\n                    headers: _r6.headers\n                  };\n\n                  if (!(_r6.headers[\"per-page\"] && (_l2 = Object.assign({}, _l2, {\n                    perPage: parseInt(_r6.headers[\"per-page\"]),\n                    total: parseInt(_r6.headers.total)\n                  })), 200 != _r6.status)) {\n                    _context7.next = 18;\n                    break;\n                  }\n\n                  return _context7.abrupt(\"return\", n(_r6));\n\n                case 18:\n                  _context7.t1 = _l2.data.story || _l2.data.stories;\n\n                  if (!_context7.t1) {\n                    _context7.next = 22;\n                    break;\n                  }\n\n                  _context7.next = 22;\n                  return _this9.resolveStories(_l2.data, e);\n\n                case 22:\n                  \"published\" === e.version && \"/cdn/spaces/me\" != t && o.set(i, _l2);\n                  _l2.data.cv && (\"draft\" == e.version && c[e.token] != _l2.data.cv && _this9.flushCache(), c[e.token] = _l2.data.cv);\n                  s(_l2);\n                  _context7.next = 35;\n                  break;\n\n                case 27:\n                  _context7.prev = 27;\n                  _context7.t2 = _context7[\"catch\"](11);\n\n                  if (!(_context7.t2.response && 429 === _context7.t2.response.status && (r += 1) < _this9.maxRetries)) {\n                    _context7.next = 34;\n                    break;\n                  }\n\n                  console.log(\"Hit rate limit. Retrying in \".concat(r, \" seconds.\"));\n                  _context7.next = 33;\n                  return l = 1e3 * r, new Promise(function (t) {\n                    return setTimeout(t, l);\n                  });\n\n                case 33:\n                  return _context7.abrupt(\"return\", _this9.cacheResponse(t, e, r).then(s).catch(n));\n\n                case 34:\n                  n(_context7.t2);\n\n                case 35:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7, null, [[11, 27]]);\n        }));\n\n        return function (_x9, _x10) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"throttledRequest\",\n    value: function throttledRequest(t, e, r) {\n      return this.client[t](e, r);\n    }\n  }, {\n    key: \"cacheVersions\",\n    value: function cacheVersions() {\n      return c;\n    }\n  }, {\n    key: \"cacheVersion\",\n    value: function cacheVersion() {\n      return c[this.accessToken];\n    }\n  }, {\n    key: \"setCacheVersion\",\n    value: function setCacheVersion(t) {\n      this.accessToken && (c[this.accessToken] = t);\n    }\n  }, {\n    key: \"cacheProvider\",\n    value: function cacheProvider() {\n      return \"memory\" === this.cache.type ? {\n        get: function get(t) {\n          return l[t];\n        },\n        getAll: function getAll() {\n          return l;\n        },\n        set: function set(t, e) {\n          l[t] = e;\n        },\n        flush: function flush() {\n          l = {};\n        }\n      } : {\n        get: function get() {},\n        getAll: function getAll() {},\n        set: function set() {},\n        flush: function flush() {}\n      };\n    }\n  }, {\n    key: \"flushCache\",\n    value: function () {\n      var _flushCache = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.cacheProvider().flush();\n\n              case 2:\n                return _context8.abrupt(\"return\", this);\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function flushCache() {\n        return _flushCache.apply(this, arguments);\n      }\n\n      return flushCache;\n    }()\n  }]);\n\n  return h;\n}();\n\nexport { h as default };","map":{"version":3,"sources":["/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/storyblok-js-client/dist/index.es.js"],"names":["t","e","r","s","TypeError","n","i","o","a","setTimeout","length","filter","indexOf","push","shift","resolve","apply","self","args","l","arguments","Promise","reject","abort","forEach","clearTimeout","throttle","AbortError","Error","call","name","nodes","horizontal_rule","singleTag","blockquote","tag","bullet_list","code_block","attrs","hard_break","heading","level","image","list_item","ordered_list","paragraph","marks","bold","strike","underline","strong","code","italic","link","linktype","href","anchor","styled","content","Array","isArray","renderNode","console","warn","getMatchingMark","renderOpeningTag","getMatchingNode","text","RegExp","source","test","replace","renderTag","html","renderClosingTag","slice","reverse","join","constructor","String","map","type","Math","abs","Object","prototype","hasOwnProperty","encodeURIComponent","c","h","region","https","oauthToken","assign","headers","Authorization","rateLimit","richTextResolver","richTextSchema","componentResolver","setComponentResolver","maxRetries","throttledRequest","accessToken","relations","links","cache","clear","client","create","baseURL","timeout","proxy","responseInterceptor","interceptors","response","use","resolveNestedRelations","addNode","body","component","version","token","getToken","cv","resolve_relations","parseParams","factoryParamOptions","per_page","page","cacheResponse","split","makeRequest","ceil","total","reduce","all","values","data","get","JSON","parse","stringify","fieldtype","id","story","_cleanCopy","uuid","_stopResolving","_uid","_insertRelations","_insertLinks","link_uuids","min","getStories","language","by_uuids","stories","rel_uuids","rels","resolveRelations","resolve_links","resolveLinks","iterateTree","url","params","cacheProvider","flushCache","paramsSerializer","perPage","parseInt","status","resolveStories","set","log","then","catch","getAll","flush","default"],"mappings":"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","sourcesContent":["/*!\n * storyblok-js-client v0.0.0-development\n * Universal JavaScript SDK for Storyblok's API\n * (c) 2020-2022 Stobylok Team\n */\nimport t from\"axios\";function e(t){return\"number\"==typeof t&&(t==t&&t!==1/0&&t!==-1/0)}function r(t,r,s){if(!e(r))throw new TypeError(\"Expected `limit` to be a finite number\");if(!e(s))throw new TypeError(\"Expected `interval` to be a finite number\");var n=[],i=[],o=0,a=function(){o++;var e=setTimeout((function(){o--,n.length>0&&a(),i=i.filter((function(t){return t!==e}))}),s);i.indexOf(e)<0&&i.push(e);var r=n.shift();r.resolve(t.apply(r.self,r.args))},l=function(){var t=arguments,e=this;return new Promise((function(s,i){n.push({resolve:s,reject:i,args:t,self:e}),o<r&&a()}))};return l.abort=function(){i.forEach(clearTimeout),i=[],n.forEach((function(t){t.reject(new throttle.AbortError)})),n.length=0},l}r.AbortError=function(){Error.call(this,\"Throttled function aborted\"),this.name=\"AbortError\"};const s=function(t,e){if(!t)return null;let r={};for(let s in t){let n=t[s];e.indexOf(s)>-1&&null!==n&&(r[s]=n)}return r};var n={nodes:{horizontal_rule:t=>({singleTag:\"hr\"}),blockquote:t=>({tag:\"blockquote\"}),bullet_list:t=>({tag:\"ul\"}),code_block:t=>({tag:[\"pre\",{tag:\"code\",attrs:t.attrs}]}),hard_break:t=>({singleTag:\"br\"}),heading:t=>({tag:`h${t.attrs.level}`}),image:t=>({singleTag:[{tag:\"img\",attrs:s(t.attrs,[\"src\",\"alt\",\"title\"])}]}),list_item:t=>({tag:\"li\"}),ordered_list:t=>({tag:\"ol\"}),paragraph:t=>({tag:\"p\"})},marks:{bold:()=>({tag:\"b\"}),strike:()=>({tag:\"strike\"}),underline:()=>({tag:\"u\"}),strong:()=>({tag:\"strong\"}),code:()=>({tag:\"code\"}),italic:()=>({tag:\"i\"}),link(t){const e={...t.attrs},{linktype:r=\"url\"}=t.attrs;return\"email\"===r&&(e.href=`mailto:${e.href}`),e.anchor&&(e.href=`${e.href}#${e.anchor}`,delete e.anchor),{tag:[{tag:\"a\",attrs:e}]}},styled:t=>({tag:[{tag:\"span\",attrs:t.attrs}]})}};class i{constructor(t){t||(t=n),this.marks=t.marks||[],this.nodes=t.nodes||[]}addNode(t,e){this.nodes[t]=e}addMark(t,e){this.marks[t]=e}render(t={}){if(t.content&&Array.isArray(t.content)){let e=\"\";return t.content.forEach((t=>{e+=this.renderNode(t)})),e}return console.warn(\"The render method must receive an object with a content field, which is an array\"),\"\"}renderNode(t){let e=[];t.marks&&t.marks.forEach((t=>{const r=this.getMatchingMark(t);r&&e.push(this.renderOpeningTag(r.tag))}));const r=this.getMatchingNode(t);return r&&r.tag&&e.push(this.renderOpeningTag(r.tag)),t.content?t.content.forEach((t=>{e.push(this.renderNode(t))})):t.text?e.push(function(t){const e={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},r=/[&<>\"']/g,s=RegExp(r.source);return t&&s.test(t)?t.replace(r,(t=>e[t])):t}(t.text)):r&&r.singleTag?e.push(this.renderTag(r.singleTag,\" /\")):r&&r.html&&e.push(r.html),r&&r.tag&&e.push(this.renderClosingTag(r.tag)),t.marks&&t.marks.slice(0).reverse().forEach((t=>{const r=this.getMatchingMark(t);r&&e.push(this.renderClosingTag(r.tag))})),e.join(\"\")}renderTag(t,e){if(t.constructor===String)return`<${t}${e}>`;return t.map((t=>{if(t.constructor===String)return`<${t}${e}>`;{let r=`<${t.tag}`;if(t.attrs)for(let e in t.attrs){let s=t.attrs[e];null!==s&&(r+=` ${e}=\"${s}\"`)}return`${r}${e}>`}})).join(\"\")}renderOpeningTag(t){return this.renderTag(t,\"\")}renderClosingTag(t){if(t.constructor===String)return`</${t}>`;return t.slice(0).reverse().map((t=>t.constructor===String?`</${t}>`:`</${t.tag}>`)).join(\"\")}getMatchingNode(t){if(\"function\"==typeof this.nodes[t.type])return this.nodes[t.type](t)}getMatchingMark(t){if(\"function\"==typeof this.marks[t.type])return this.marks[t.type](t)}}const o=(t=0,e=t)=>{const r=Math.abs(e-t)||0,s=t<e?1:-1;return((t=0,e)=>[...Array(t)].map(e))(r,((e,r)=>r*s+t))},a=(t,e,r)=>{const s=[];for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const i=t[n],o=r?\"\":encodeURIComponent(n);let l;l=\"object\"==typeof i?a(i,e?e+encodeURIComponent(\"[\"+o+\"]\"):o,Array.isArray(i)):(e?e+encodeURIComponent(\"[\"+o+\"]\"):o)+\"=\"+encodeURIComponent(i),s.push(l)}return s.join(\"&\")};let l={},c={};class h{constructor(e,s){if(!s){let t=e.region?`-${e.region}`:\"\",r=!1===e.https?\"http\":\"https\";s=void 0===e.oauthToken?`${r}://api${t}.storyblok.com/v2`:`${r}://api${t}.storyblok.com/v1`}let n=Object.assign({},e.headers),o=5;void 0!==e.oauthToken&&(n.Authorization=e.oauthToken,o=3),void 0!==e.rateLimit&&(o=e.rateLimit),this.richTextResolver=new i(e.richTextSchema),\"function\"==typeof e.componentResolver&&this.setComponentResolver(e.componentResolver),this.maxRetries=e.maxRetries||5,this.throttle=r(this.throttledRequest,o,1e3),this.accessToken=e.accessToken,this.relations={},this.links={},this.cache=e.cache||{clear:\"manual\"},this.client=t.create({baseURL:s,timeout:e.timeout||0,headers:n,proxy:e.proxy||!1}),e.responseInterceptor&&this.client.interceptors.response.use((t=>e.responseInterceptor(t))),this.resolveNestedRelations=e.resolveNestedRelations||!0}setComponentResolver(t){this.richTextResolver.addNode(\"blok\",(e=>{let r=\"\";return e.attrs.body.forEach((e=>{r+=t(e.component,e)})),{html:r}}))}parseParams(t={}){return t.version||(t.version=\"published\"),t.token||(t.token=this.getToken()),t.cv||(t.cv=c[t.token]),Array.isArray(t.resolve_relations)&&(t.resolve_relations=t.resolve_relations.join(\",\")),t}factoryParamOptions(t,e={}){return((t=\"\")=>t.indexOf(\"/cdn/\")>-1)(t)?this.parseParams(e):e}makeRequest(t,e,r,s){const n=this.factoryParamOptions(t,((t={},e=25,r=1)=>({...t,per_page:e,page:r}))(e,r,s));return this.cacheResponse(t,n)}get(t,e){let r=`/${t}`;const s=this.factoryParamOptions(r,e);return this.cacheResponse(r,s)}async getAll(t,e={},r){const s=e.per_page||25,n=`/${t}`,i=n.split(\"/\");r=r||i[i.length-1];const a=await this.makeRequest(n,e,s,1),l=Math.ceil(a.total/s);return((t=[],e)=>t.map(e).reduce(((t,e)=>[...t,...e]),[]))([a,...await(async(t=[],e)=>Promise.all(t.map(e)))(o(1,l),(async t=>this.makeRequest(n,e,s,t+1)))],(t=>Object.values(t.data[r])))}post(t,e){let r=`/${t}`;return this.throttle(\"post\",r,e)}put(t,e){let r=`/${t}`;return this.throttle(\"put\",r,e)}delete(t,e){let r=`/${t}`;return this.throttle(\"delete\",r,e)}getStories(t){return this.get(\"cdn/stories\",t)}getStory(t,e){return this.get(`cdn/stories/${t}`,e)}setToken(t){this.accessToken=t}getToken(){return this.accessToken}_cleanCopy(t){return JSON.parse(JSON.stringify(t))}_insertLinks(t,e){const r=t[e];r&&\"multilink\"==r.fieldtype&&\"story\"==r.linktype&&\"string\"==typeof r.id&&this.links[r.id]?r.story=this._cleanCopy(this.links[r.id]):r&&\"story\"===r.linktype&&\"string\"==typeof r.uuid&&this.links[r.uuid]&&(r.story=this._cleanCopy(this.links[r.uuid]))}_insertRelations(t,e,r){if(r.indexOf(t.component+\".\"+e)>-1)if(\"string\"==typeof t[e])this.relations[t[e]]&&(t[e]=this._cleanCopy(this.relations[t[e]]));else if(t[e].constructor===Array){let r=[];t[e].forEach((t=>{this.relations[t]&&r.push(this._cleanCopy(this.relations[t]))})),t[e]=r}}iterateTree(t,e){let r=t=>{if(null!=t)if(t.constructor===Array)for(let e=0;e<t.length;e++)r(t[e]);else if(t.constructor===Object){if(t._stopResolving)return;for(let s in t)(t.component&&t._uid||\"link\"===t.type)&&(this._insertRelations(t,s,e),this._insertLinks(t,s)),r(t[s])}};r(t.content)}async resolveLinks(t,e){let r=[];if(t.link_uuids){const s=t.link_uuids.length;let n=[];const i=50;for(let e=0;e<s;e+=i){const r=Math.min(s,e+i);n.push(t.link_uuids.slice(e,r))}for(let t=0;t<n.length;t++){(await this.getStories({per_page:i,language:e.language,version:e.version,by_uuids:n[t].join(\",\")})).data.stories.forEach((t=>{r.push(t)}))}}else r=t.links;r.forEach((t=>{this.links[t.uuid]={...t,_stopResolving:!0}}))}async resolveRelations(t,e){let r=[];if(t.rel_uuids){const s=t.rel_uuids.length;let n=[];const i=50;for(let e=0;e<s;e+=i){const r=Math.min(s,e+i);n.push(t.rel_uuids.slice(e,r))}for(let t=0;t<n.length;t++){(await this.getStories({per_page:i,language:e.language,version:e.version,by_uuids:n[t].join(\",\")})).data.stories.forEach((t=>{r.push(t)}))}}else r=t.rels;r.forEach((t=>{this.relations[t.uuid]={...t,_stopResolving:!0}}))}async resolveStories(t,e){let r=[];if(void 0!==e.resolve_relations&&e.resolve_relations.length>0&&(r=e.resolve_relations.split(\",\"),await this.resolveRelations(t,e)),[\"1\",\"story\",\"url\"].indexOf(e.resolve_links)>-1&&await this.resolveLinks(t,e),this.resolveNestedRelations)for(const t in this.relations)this.iterateTree(this.relations[t],r);t.story?this.iterateTree(t.story,r):t.stories.forEach((t=>{this.iterateTree(t,r)}))}cacheResponse(t,e,r){return void 0===r&&(r=0),new Promise((async(s,n)=>{let i=a({url:t,params:e}),o=this.cacheProvider();if(\"auto\"===this.cache.clear&&\"draft\"===e.version&&await this.flushCache(),\"published\"===e.version&&\"/cdn/spaces/me\"!=t){const t=await o.get(i);if(t)return s(t)}try{let r=await this.throttle(\"get\",t,{params:e,paramsSerializer:t=>a(t)}),l={data:r.data,headers:r.headers};if(r.headers[\"per-page\"]&&(l=Object.assign({},l,{perPage:parseInt(r.headers[\"per-page\"]),total:parseInt(r.headers.total)})),200!=r.status)return n(r);(l.data.story||l.data.stories)&&await this.resolveStories(l.data,e),\"published\"===e.version&&\"/cdn/spaces/me\"!=t&&o.set(i,l),l.data.cv&&(\"draft\"==e.version&&c[e.token]!=l.data.cv&&this.flushCache(),c[e.token]=l.data.cv),s(l)}catch(i){if(i.response&&429===i.response.status&&(r+=1)<this.maxRetries)return console.log(`Hit rate limit. Retrying in ${r} seconds.`),await(l=1e3*r,new Promise((t=>setTimeout(t,l)))),this.cacheResponse(t,e,r).then(s).catch(n);n(i)}var l}))}throttledRequest(t,e,r){return this.client[t](e,r)}cacheVersions(){return c}cacheVersion(){return c[this.accessToken]}setCacheVersion(t){this.accessToken&&(c[this.accessToken]=t)}cacheProvider(){return\"memory\"===this.cache.type?{get:t=>l[t],getAll:()=>l,set(t,e){l[t]=e},flush(){l={}}}:{get(){},getAll(){},set(){},flush(){}}}async flushCache(){return await this.cacheProvider().flush(),this}}export{h as default};\n"]},"metadata":{},"sourceType":"module"}