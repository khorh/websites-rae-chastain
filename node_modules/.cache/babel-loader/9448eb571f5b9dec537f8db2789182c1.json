{"ast":null,"code":"/*!\n * storyblok-js-client v0.0.0-development\n * Universal JavaScript SDK for Storyblok's API\n * (c) 2020-2022 Stobylok Team\n */\nimport t from \"axios\";\n\nfunction e(t) {\n  return \"number\" == typeof t && t == t && t !== 1 / 0 && t !== -1 / 0;\n}\n\nfunction r(t, r, s) {\n  if (!e(r)) throw new TypeError(\"Expected `limit` to be a finite number\");\n  if (!e(s)) throw new TypeError(\"Expected `interval` to be a finite number\");\n\n  var n = [],\n      i = [],\n      o = 0,\n      a = function () {\n    o++;\n    var e = setTimeout(function () {\n      o--, n.length > 0 && a(), i = i.filter(function (t) {\n        return t !== e;\n      });\n    }, s);\n    i.indexOf(e) < 0 && i.push(e);\n    var r = n.shift();\n    r.resolve(t.apply(r.self, r.args));\n  },\n      l = function () {\n    var t = arguments,\n        e = this;\n    return new Promise(function (s, i) {\n      n.push({\n        resolve: s,\n        reject: i,\n        args: t,\n        self: e\n      }), o < r && a();\n    });\n  };\n\n  return l.abort = function () {\n    i.forEach(clearTimeout), i = [], n.forEach(function (t) {\n      t.reject(new throttle.AbortError());\n    }), n.length = 0;\n  }, l;\n}\n\nr.AbortError = function () {\n  Error.call(this, \"Throttled function aborted\"), this.name = \"AbortError\";\n};\n\nconst s = function (t, e) {\n  if (!t) return null;\n  let r = {};\n\n  for (let s in t) {\n    let n = t[s];\n    e.indexOf(s) > -1 && null !== n && (r[s] = n);\n  }\n\n  return r;\n};\n\nvar n = {\n  nodes: {\n    horizontal_rule: t => ({\n      singleTag: \"hr\"\n    }),\n    blockquote: t => ({\n      tag: \"blockquote\"\n    }),\n    bullet_list: t => ({\n      tag: \"ul\"\n    }),\n    code_block: t => ({\n      tag: [\"pre\", {\n        tag: \"code\",\n        attrs: t.attrs\n      }]\n    }),\n    hard_break: t => ({\n      singleTag: \"br\"\n    }),\n    heading: t => ({\n      tag: `h${t.attrs.level}`\n    }),\n    image: t => ({\n      singleTag: [{\n        tag: \"img\",\n        attrs: s(t.attrs, [\"src\", \"alt\", \"title\"])\n      }]\n    }),\n    list_item: t => ({\n      tag: \"li\"\n    }),\n    ordered_list: t => ({\n      tag: \"ol\"\n    }),\n    paragraph: t => ({\n      tag: \"p\"\n    })\n  },\n  marks: {\n    bold: () => ({\n      tag: \"b\"\n    }),\n    strike: () => ({\n      tag: \"strike\"\n    }),\n    underline: () => ({\n      tag: \"u\"\n    }),\n    strong: () => ({\n      tag: \"strong\"\n    }),\n    code: () => ({\n      tag: \"code\"\n    }),\n    italic: () => ({\n      tag: \"i\"\n    }),\n\n    link(t) {\n      const e = { ...t.attrs\n      },\n            {\n        linktype: r = \"url\"\n      } = t.attrs;\n      return \"email\" === r && (e.href = `mailto:${e.href}`), e.anchor && (e.href = `${e.href}#${e.anchor}`, delete e.anchor), {\n        tag: [{\n          tag: \"a\",\n          attrs: e\n        }]\n      };\n    },\n\n    styled: t => ({\n      tag: [{\n        tag: \"span\",\n        attrs: t.attrs\n      }]\n    })\n  }\n};\n\nclass i {\n  constructor(t) {\n    t || (t = n), this.marks = t.marks || [], this.nodes = t.nodes || [];\n  }\n\n  addNode(t, e) {\n    this.nodes[t] = e;\n  }\n\n  addMark(t, e) {\n    this.marks[t] = e;\n  }\n\n  render() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (t.content && Array.isArray(t.content)) {\n      let e = \"\";\n      return t.content.forEach(t => {\n        e += this.renderNode(t);\n      }), e;\n    }\n\n    return console.warn(\"The render method must receive an object with a content field, which is an array\"), \"\";\n  }\n\n  renderNode(t) {\n    let e = [];\n    t.marks && t.marks.forEach(t => {\n      const r = this.getMatchingMark(t);\n      r && e.push(this.renderOpeningTag(r.tag));\n    });\n    const r = this.getMatchingNode(t);\n    return r && r.tag && e.push(this.renderOpeningTag(r.tag)), t.content ? t.content.forEach(t => {\n      e.push(this.renderNode(t));\n    }) : t.text ? e.push(function (t) {\n      const e = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        '\"': \"&quot;\",\n        \"'\": \"&#39;\"\n      },\n            r = /[&<>\"']/g,\n            s = RegExp(r.source);\n      return t && s.test(t) ? t.replace(r, t => e[t]) : t;\n    }(t.text)) : r && r.singleTag ? e.push(this.renderTag(r.singleTag, \" /\")) : r && r.html && e.push(r.html), r && r.tag && e.push(this.renderClosingTag(r.tag)), t.marks && t.marks.slice(0).reverse().forEach(t => {\n      const r = this.getMatchingMark(t);\n      r && e.push(this.renderClosingTag(r.tag));\n    }), e.join(\"\");\n  }\n\n  renderTag(t, e) {\n    if (t.constructor === String) return `<${t}${e}>`;\n    return t.map(t => {\n      if (t.constructor === String) return `<${t}${e}>`;\n      {\n        let r = `<${t.tag}`;\n        if (t.attrs) for (let e in t.attrs) {\n          let s = t.attrs[e];\n          null !== s && (r += ` ${e}=\"${s}\"`);\n        }\n        return `${r}${e}>`;\n      }\n    }).join(\"\");\n  }\n\n  renderOpeningTag(t) {\n    return this.renderTag(t, \"\");\n  }\n\n  renderClosingTag(t) {\n    if (t.constructor === String) return `</${t}>`;\n    return t.slice(0).reverse().map(t => t.constructor === String ? `</${t}>` : `</${t.tag}>`).join(\"\");\n  }\n\n  getMatchingNode(t) {\n    if (\"function\" == typeof this.nodes[t.type]) return this.nodes[t.type](t);\n  }\n\n  getMatchingMark(t) {\n    if (\"function\" == typeof this.marks[t.type]) return this.marks[t.type](t);\n  }\n\n}\n\nconst o = function () {\n  let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;\n  const r = Math.abs(e - t) || 0,\n        s = t < e ? 1 : -1;\n  return function () {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    return [...Array(t)].map(e);\n  }(r, (e, r) => r * s + t);\n},\n      a = (t, e, r) => {\n  const s = [];\n\n  for (const n in t) {\n    if (!Object.prototype.hasOwnProperty.call(t, n)) continue;\n    const i = t[n],\n          o = r ? \"\" : encodeURIComponent(n);\n    let l;\n    l = \"object\" == typeof i ? a(i, e ? e + encodeURIComponent(\"[\" + o + \"]\") : o, Array.isArray(i)) : (e ? e + encodeURIComponent(\"[\" + o + \"]\") : o) + \"=\" + encodeURIComponent(i), s.push(l);\n  }\n\n  return s.join(\"&\");\n};\n\nlet l = {},\n    c = {};\n\nclass h {\n  constructor(e, s) {\n    if (!s) {\n      let t = e.region ? `-${e.region}` : \"\",\n          r = !1 === e.https ? \"http\" : \"https\";\n      s = void 0 === e.oauthToken ? `${r}://api${t}.storyblok.com/v2` : `${r}://api${t}.storyblok.com/v1`;\n    }\n\n    let n = Object.assign({}, e.headers),\n        o = 5;\n    void 0 !== e.oauthToken && (n.Authorization = e.oauthToken, o = 3), void 0 !== e.rateLimit && (o = e.rateLimit), this.richTextResolver = new i(e.richTextSchema), \"function\" == typeof e.componentResolver && this.setComponentResolver(e.componentResolver), this.maxRetries = e.maxRetries || 5, this.throttle = r(this.throttledRequest, o, 1e3), this.accessToken = e.accessToken, this.relations = {}, this.links = {}, this.cache = e.cache || {\n      clear: \"manual\"\n    }, this.client = t.create({\n      baseURL: s,\n      timeout: e.timeout || 0,\n      headers: n,\n      proxy: e.proxy || !1\n    }), e.responseInterceptor && this.client.interceptors.response.use(t => e.responseInterceptor(t)), this.resolveNestedRelations = e.resolveNestedRelations || !0;\n  }\n\n  setComponentResolver(t) {\n    this.richTextResolver.addNode(\"blok\", e => {\n      let r = \"\";\n      return e.attrs.body.forEach(e => {\n        r += t(e.component, e);\n      }), {\n        html: r\n      };\n    });\n  }\n\n  parseParams() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return t.version || (t.version = \"published\"), t.token || (t.token = this.getToken()), t.cv || (t.cv = c[t.token]), Array.isArray(t.resolve_relations) && (t.resolve_relations = t.resolve_relations.join(\",\")), t;\n  }\n\n  factoryParamOptions(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return function () {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return t.indexOf(\"/cdn/\") > -1;\n    }(t) ? this.parseParams(e) : e;\n  }\n\n  makeRequest(t, e, r, s) {\n    const n = this.factoryParamOptions(t, function () {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 25;\n      let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      return { ...t,\n        per_page: e,\n        page: r\n      };\n    }(e, r, s));\n    return this.cacheResponse(t, n);\n  }\n\n  get(t, e) {\n    let r = `/${t}`;\n    const s = this.factoryParamOptions(r, e);\n    return this.cacheResponse(r, s);\n  }\n\n  async getAll(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let r = arguments.length > 2 ? arguments[2] : undefined;\n    const s = e.per_page || 25,\n          n = `/${t}`,\n          i = n.split(\"/\");\n    r = r || i[i.length - 1];\n    const a = await this.makeRequest(n, e, s, 1),\n          l = Math.ceil(a.total / s);\n    return function () {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      let e = arguments.length > 1 ? arguments[1] : undefined;\n      return t.map(e).reduce((t, e) => [...t, ...e], []);\n    }([a, ...(await async function () {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      let e = arguments.length > 1 ? arguments[1] : undefined;\n      return Promise.all(t.map(e));\n    }(o(1, l), async t => this.makeRequest(n, e, s, t + 1)))], t => Object.values(t.data[r]));\n  }\n\n  post(t, e) {\n    let r = `/${t}`;\n    return this.throttle(\"post\", r, e);\n  }\n\n  put(t, e) {\n    let r = `/${t}`;\n    return this.throttle(\"put\", r, e);\n  }\n\n  delete(t, e) {\n    let r = `/${t}`;\n    return this.throttle(\"delete\", r, e);\n  }\n\n  getStories(t) {\n    return this.get(\"cdn/stories\", t);\n  }\n\n  getStory(t, e) {\n    return this.get(`cdn/stories/${t}`, e);\n  }\n\n  setToken(t) {\n    this.accessToken = t;\n  }\n\n  getToken() {\n    return this.accessToken;\n  }\n\n  _cleanCopy(t) {\n    return JSON.parse(JSON.stringify(t));\n  }\n\n  _insertLinks(t, e) {\n    const r = t[e];\n    r && \"multilink\" == r.fieldtype && \"story\" == r.linktype && \"string\" == typeof r.id && this.links[r.id] ? r.story = this._cleanCopy(this.links[r.id]) : r && \"story\" === r.linktype && \"string\" == typeof r.uuid && this.links[r.uuid] && (r.story = this._cleanCopy(this.links[r.uuid]));\n  }\n\n  _insertRelations(t, e, r) {\n    if (r.indexOf(t.component + \".\" + e) > -1) if (\"string\" == typeof t[e]) this.relations[t[e]] && (t[e] = this._cleanCopy(this.relations[t[e]]));else if (t[e].constructor === Array) {\n      let r = [];\n      t[e].forEach(t => {\n        this.relations[t] && r.push(this._cleanCopy(this.relations[t]));\n      }), t[e] = r;\n    }\n  }\n\n  iterateTree(t, e) {\n    let r = t => {\n      if (null != t) if (t.constructor === Array) for (let e = 0; e < t.length; e++) r(t[e]);else if (t.constructor === Object) {\n        if (t._stopResolving) return;\n\n        for (let s in t) (t.component && t._uid || \"link\" === t.type) && (this._insertRelations(t, s, e), this._insertLinks(t, s)), r(t[s]);\n      }\n    };\n\n    r(t.content);\n  }\n\n  async resolveLinks(t, e) {\n    let r = [];\n\n    if (t.link_uuids) {\n      const s = t.link_uuids.length;\n      let n = [];\n      const i = 50;\n\n      for (let e = 0; e < s; e += i) {\n        const r = Math.min(s, e + i);\n        n.push(t.link_uuids.slice(e, r));\n      }\n\n      for (let t = 0; t < n.length; t++) {\n        (await this.getStories({\n          per_page: i,\n          language: e.language,\n          version: e.version,\n          by_uuids: n[t].join(\",\")\n        })).data.stories.forEach(t => {\n          r.push(t);\n        });\n      }\n    } else r = t.links;\n\n    r.forEach(t => {\n      this.links[t.uuid] = { ...t,\n        _stopResolving: !0\n      };\n    });\n  }\n\n  async resolveRelations(t, e) {\n    let r = [];\n\n    if (t.rel_uuids) {\n      const s = t.rel_uuids.length;\n      let n = [];\n      const i = 50;\n\n      for (let e = 0; e < s; e += i) {\n        const r = Math.min(s, e + i);\n        n.push(t.rel_uuids.slice(e, r));\n      }\n\n      for (let t = 0; t < n.length; t++) {\n        (await this.getStories({\n          per_page: i,\n          language: e.language,\n          version: e.version,\n          by_uuids: n[t].join(\",\")\n        })).data.stories.forEach(t => {\n          r.push(t);\n        });\n      }\n    } else r = t.rels;\n\n    r.forEach(t => {\n      this.relations[t.uuid] = { ...t,\n        _stopResolving: !0\n      };\n    });\n  }\n\n  async resolveStories(t, e) {\n    let r = [];\n    if (void 0 !== e.resolve_relations && e.resolve_relations.length > 0 && (r = e.resolve_relations.split(\",\"), await this.resolveRelations(t, e)), [\"1\", \"story\", \"url\"].indexOf(e.resolve_links) > -1 && (await this.resolveLinks(t, e)), this.resolveNestedRelations) for (const t in this.relations) this.iterateTree(this.relations[t], r);\n    t.story ? this.iterateTree(t.story, r) : t.stories.forEach(t => {\n      this.iterateTree(t, r);\n    });\n  }\n\n  cacheResponse(t, e, r) {\n    return void 0 === r && (r = 0), new Promise(async (s, n) => {\n      let i = a({\n        url: t,\n        params: e\n      }),\n          o = this.cacheProvider();\n\n      if (\"auto\" === this.cache.clear && \"draft\" === e.version && (await this.flushCache()), \"published\" === e.version && \"/cdn/spaces/me\" != t) {\n        const t = await o.get(i);\n        if (t) return s(t);\n      }\n\n      try {\n        let r = await this.throttle(\"get\", t, {\n          params: e,\n          paramsSerializer: t => a(t)\n        }),\n            l = {\n          data: r.data,\n          headers: r.headers\n        };\n        if (r.headers[\"per-page\"] && (l = Object.assign({}, l, {\n          perPage: parseInt(r.headers[\"per-page\"]),\n          total: parseInt(r.headers.total)\n        })), 200 != r.status) return n(r);\n        (l.data.story || l.data.stories) && (await this.resolveStories(l.data, e)), \"published\" === e.version && \"/cdn/spaces/me\" != t && o.set(i, l), l.data.cv && (\"draft\" == e.version && c[e.token] != l.data.cv && this.flushCache(), c[e.token] = l.data.cv), s(l);\n      } catch (i) {\n        if (i.response && 429 === i.response.status && (r += 1) < this.maxRetries) return console.log(`Hit rate limit. Retrying in ${r} seconds.`), await (l = 1e3 * r, new Promise(t => setTimeout(t, l))), this.cacheResponse(t, e, r).then(s).catch(n);\n        n(i);\n      }\n\n      var l;\n    });\n  }\n\n  throttledRequest(t, e, r) {\n    return this.client[t](e, r);\n  }\n\n  cacheVersions() {\n    return c;\n  }\n\n  cacheVersion() {\n    return c[this.accessToken];\n  }\n\n  setCacheVersion(t) {\n    this.accessToken && (c[this.accessToken] = t);\n  }\n\n  cacheProvider() {\n    return \"memory\" === this.cache.type ? {\n      get: t => l[t],\n      getAll: () => l,\n\n      set(t, e) {\n        l[t] = e;\n      },\n\n      flush() {\n        l = {};\n      }\n\n    } : {\n      get() {},\n\n      getAll() {},\n\n      set() {},\n\n      flush() {}\n\n    };\n  }\n\n  async flushCache() {\n    return await this.cacheProvider().flush(), this;\n  }\n\n}\n\nexport { h as default };","map":{"version":3,"sources":["/Users/helenkhor/Documents/02 Projects/Rae Chastain/node_modules/storyblok-js-client/dist/index.es.js"],"names":["t","e","r","s","TypeError","n","i","o","a","setTimeout","length","filter","indexOf","push","shift","resolve","apply","self","args","l","arguments","Promise","reject","abort","forEach","clearTimeout","throttle","AbortError","Error","call","name","nodes","horizontal_rule","singleTag","blockquote","tag","bullet_list","code_block","attrs","hard_break","heading","level","image","list_item","ordered_list","paragraph","marks","bold","strike","underline","strong","code","italic","link","linktype","href","anchor","styled","constructor","addNode","addMark","render","content","Array","isArray","renderNode","console","warn","getMatchingMark","renderOpeningTag","getMatchingNode","text","RegExp","source","test","replace","renderTag","html","renderClosingTag","slice","reverse","join","String","map","type","Math","abs","Object","prototype","hasOwnProperty","encodeURIComponent","c","h","region","https","oauthToken","assign","headers","Authorization","rateLimit","richTextResolver","richTextSchema","componentResolver","setComponentResolver","maxRetries","throttledRequest","accessToken","relations","links","cache","clear","client","create","baseURL","timeout","proxy","responseInterceptor","interceptors","response","use","resolveNestedRelations","body","component","parseParams","version","token","getToken","cv","resolve_relations","factoryParamOptions","makeRequest","per_page","page","cacheResponse","get","getAll","split","ceil","total","reduce","all","values","data","post","put","delete","getStories","getStory","setToken","_cleanCopy","JSON","parse","stringify","_insertLinks","fieldtype","id","story","uuid","_insertRelations","iterateTree","_stopResolving","_uid","resolveLinks","link_uuids","min","language","by_uuids","stories","resolveRelations","rel_uuids","rels","resolveStories","resolve_links","url","params","cacheProvider","flushCache","paramsSerializer","perPage","parseInt","status","set","log","then","catch","cacheVersions","cacheVersion","setCacheVersion","flush","default"],"mappings":"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","sourcesContent":["/*!\n * storyblok-js-client v0.0.0-development\n * Universal JavaScript SDK for Storyblok's API\n * (c) 2020-2022 Stobylok Team\n */\nimport t from\"axios\";function e(t){return\"number\"==typeof t&&(t==t&&t!==1/0&&t!==-1/0)}function r(t,r,s){if(!e(r))throw new TypeError(\"Expected `limit` to be a finite number\");if(!e(s))throw new TypeError(\"Expected `interval` to be a finite number\");var n=[],i=[],o=0,a=function(){o++;var e=setTimeout((function(){o--,n.length>0&&a(),i=i.filter((function(t){return t!==e}))}),s);i.indexOf(e)<0&&i.push(e);var r=n.shift();r.resolve(t.apply(r.self,r.args))},l=function(){var t=arguments,e=this;return new Promise((function(s,i){n.push({resolve:s,reject:i,args:t,self:e}),o<r&&a()}))};return l.abort=function(){i.forEach(clearTimeout),i=[],n.forEach((function(t){t.reject(new throttle.AbortError)})),n.length=0},l}r.AbortError=function(){Error.call(this,\"Throttled function aborted\"),this.name=\"AbortError\"};const s=function(t,e){if(!t)return null;let r={};for(let s in t){let n=t[s];e.indexOf(s)>-1&&null!==n&&(r[s]=n)}return r};var n={nodes:{horizontal_rule:t=>({singleTag:\"hr\"}),blockquote:t=>({tag:\"blockquote\"}),bullet_list:t=>({tag:\"ul\"}),code_block:t=>({tag:[\"pre\",{tag:\"code\",attrs:t.attrs}]}),hard_break:t=>({singleTag:\"br\"}),heading:t=>({tag:`h${t.attrs.level}`}),image:t=>({singleTag:[{tag:\"img\",attrs:s(t.attrs,[\"src\",\"alt\",\"title\"])}]}),list_item:t=>({tag:\"li\"}),ordered_list:t=>({tag:\"ol\"}),paragraph:t=>({tag:\"p\"})},marks:{bold:()=>({tag:\"b\"}),strike:()=>({tag:\"strike\"}),underline:()=>({tag:\"u\"}),strong:()=>({tag:\"strong\"}),code:()=>({tag:\"code\"}),italic:()=>({tag:\"i\"}),link(t){const e={...t.attrs},{linktype:r=\"url\"}=t.attrs;return\"email\"===r&&(e.href=`mailto:${e.href}`),e.anchor&&(e.href=`${e.href}#${e.anchor}`,delete e.anchor),{tag:[{tag:\"a\",attrs:e}]}},styled:t=>({tag:[{tag:\"span\",attrs:t.attrs}]})}};class i{constructor(t){t||(t=n),this.marks=t.marks||[],this.nodes=t.nodes||[]}addNode(t,e){this.nodes[t]=e}addMark(t,e){this.marks[t]=e}render(t={}){if(t.content&&Array.isArray(t.content)){let e=\"\";return t.content.forEach((t=>{e+=this.renderNode(t)})),e}return console.warn(\"The render method must receive an object with a content field, which is an array\"),\"\"}renderNode(t){let e=[];t.marks&&t.marks.forEach((t=>{const r=this.getMatchingMark(t);r&&e.push(this.renderOpeningTag(r.tag))}));const r=this.getMatchingNode(t);return r&&r.tag&&e.push(this.renderOpeningTag(r.tag)),t.content?t.content.forEach((t=>{e.push(this.renderNode(t))})):t.text?e.push(function(t){const e={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},r=/[&<>\"']/g,s=RegExp(r.source);return t&&s.test(t)?t.replace(r,(t=>e[t])):t}(t.text)):r&&r.singleTag?e.push(this.renderTag(r.singleTag,\" /\")):r&&r.html&&e.push(r.html),r&&r.tag&&e.push(this.renderClosingTag(r.tag)),t.marks&&t.marks.slice(0).reverse().forEach((t=>{const r=this.getMatchingMark(t);r&&e.push(this.renderClosingTag(r.tag))})),e.join(\"\")}renderTag(t,e){if(t.constructor===String)return`<${t}${e}>`;return t.map((t=>{if(t.constructor===String)return`<${t}${e}>`;{let r=`<${t.tag}`;if(t.attrs)for(let e in t.attrs){let s=t.attrs[e];null!==s&&(r+=` ${e}=\"${s}\"`)}return`${r}${e}>`}})).join(\"\")}renderOpeningTag(t){return this.renderTag(t,\"\")}renderClosingTag(t){if(t.constructor===String)return`</${t}>`;return t.slice(0).reverse().map((t=>t.constructor===String?`</${t}>`:`</${t.tag}>`)).join(\"\")}getMatchingNode(t){if(\"function\"==typeof this.nodes[t.type])return this.nodes[t.type](t)}getMatchingMark(t){if(\"function\"==typeof this.marks[t.type])return this.marks[t.type](t)}}const o=(t=0,e=t)=>{const r=Math.abs(e-t)||0,s=t<e?1:-1;return((t=0,e)=>[...Array(t)].map(e))(r,((e,r)=>r*s+t))},a=(t,e,r)=>{const s=[];for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const i=t[n],o=r?\"\":encodeURIComponent(n);let l;l=\"object\"==typeof i?a(i,e?e+encodeURIComponent(\"[\"+o+\"]\"):o,Array.isArray(i)):(e?e+encodeURIComponent(\"[\"+o+\"]\"):o)+\"=\"+encodeURIComponent(i),s.push(l)}return s.join(\"&\")};let l={},c={};class h{constructor(e,s){if(!s){let t=e.region?`-${e.region}`:\"\",r=!1===e.https?\"http\":\"https\";s=void 0===e.oauthToken?`${r}://api${t}.storyblok.com/v2`:`${r}://api${t}.storyblok.com/v1`}let n=Object.assign({},e.headers),o=5;void 0!==e.oauthToken&&(n.Authorization=e.oauthToken,o=3),void 0!==e.rateLimit&&(o=e.rateLimit),this.richTextResolver=new i(e.richTextSchema),\"function\"==typeof e.componentResolver&&this.setComponentResolver(e.componentResolver),this.maxRetries=e.maxRetries||5,this.throttle=r(this.throttledRequest,o,1e3),this.accessToken=e.accessToken,this.relations={},this.links={},this.cache=e.cache||{clear:\"manual\"},this.client=t.create({baseURL:s,timeout:e.timeout||0,headers:n,proxy:e.proxy||!1}),e.responseInterceptor&&this.client.interceptors.response.use((t=>e.responseInterceptor(t))),this.resolveNestedRelations=e.resolveNestedRelations||!0}setComponentResolver(t){this.richTextResolver.addNode(\"blok\",(e=>{let r=\"\";return e.attrs.body.forEach((e=>{r+=t(e.component,e)})),{html:r}}))}parseParams(t={}){return t.version||(t.version=\"published\"),t.token||(t.token=this.getToken()),t.cv||(t.cv=c[t.token]),Array.isArray(t.resolve_relations)&&(t.resolve_relations=t.resolve_relations.join(\",\")),t}factoryParamOptions(t,e={}){return((t=\"\")=>t.indexOf(\"/cdn/\")>-1)(t)?this.parseParams(e):e}makeRequest(t,e,r,s){const n=this.factoryParamOptions(t,((t={},e=25,r=1)=>({...t,per_page:e,page:r}))(e,r,s));return this.cacheResponse(t,n)}get(t,e){let r=`/${t}`;const s=this.factoryParamOptions(r,e);return this.cacheResponse(r,s)}async getAll(t,e={},r){const s=e.per_page||25,n=`/${t}`,i=n.split(\"/\");r=r||i[i.length-1];const a=await this.makeRequest(n,e,s,1),l=Math.ceil(a.total/s);return((t=[],e)=>t.map(e).reduce(((t,e)=>[...t,...e]),[]))([a,...await(async(t=[],e)=>Promise.all(t.map(e)))(o(1,l),(async t=>this.makeRequest(n,e,s,t+1)))],(t=>Object.values(t.data[r])))}post(t,e){let r=`/${t}`;return this.throttle(\"post\",r,e)}put(t,e){let r=`/${t}`;return this.throttle(\"put\",r,e)}delete(t,e){let r=`/${t}`;return this.throttle(\"delete\",r,e)}getStories(t){return this.get(\"cdn/stories\",t)}getStory(t,e){return this.get(`cdn/stories/${t}`,e)}setToken(t){this.accessToken=t}getToken(){return this.accessToken}_cleanCopy(t){return JSON.parse(JSON.stringify(t))}_insertLinks(t,e){const r=t[e];r&&\"multilink\"==r.fieldtype&&\"story\"==r.linktype&&\"string\"==typeof r.id&&this.links[r.id]?r.story=this._cleanCopy(this.links[r.id]):r&&\"story\"===r.linktype&&\"string\"==typeof r.uuid&&this.links[r.uuid]&&(r.story=this._cleanCopy(this.links[r.uuid]))}_insertRelations(t,e,r){if(r.indexOf(t.component+\".\"+e)>-1)if(\"string\"==typeof t[e])this.relations[t[e]]&&(t[e]=this._cleanCopy(this.relations[t[e]]));else if(t[e].constructor===Array){let r=[];t[e].forEach((t=>{this.relations[t]&&r.push(this._cleanCopy(this.relations[t]))})),t[e]=r}}iterateTree(t,e){let r=t=>{if(null!=t)if(t.constructor===Array)for(let e=0;e<t.length;e++)r(t[e]);else if(t.constructor===Object){if(t._stopResolving)return;for(let s in t)(t.component&&t._uid||\"link\"===t.type)&&(this._insertRelations(t,s,e),this._insertLinks(t,s)),r(t[s])}};r(t.content)}async resolveLinks(t,e){let r=[];if(t.link_uuids){const s=t.link_uuids.length;let n=[];const i=50;for(let e=0;e<s;e+=i){const r=Math.min(s,e+i);n.push(t.link_uuids.slice(e,r))}for(let t=0;t<n.length;t++){(await this.getStories({per_page:i,language:e.language,version:e.version,by_uuids:n[t].join(\",\")})).data.stories.forEach((t=>{r.push(t)}))}}else r=t.links;r.forEach((t=>{this.links[t.uuid]={...t,_stopResolving:!0}}))}async resolveRelations(t,e){let r=[];if(t.rel_uuids){const s=t.rel_uuids.length;let n=[];const i=50;for(let e=0;e<s;e+=i){const r=Math.min(s,e+i);n.push(t.rel_uuids.slice(e,r))}for(let t=0;t<n.length;t++){(await this.getStories({per_page:i,language:e.language,version:e.version,by_uuids:n[t].join(\",\")})).data.stories.forEach((t=>{r.push(t)}))}}else r=t.rels;r.forEach((t=>{this.relations[t.uuid]={...t,_stopResolving:!0}}))}async resolveStories(t,e){let r=[];if(void 0!==e.resolve_relations&&e.resolve_relations.length>0&&(r=e.resolve_relations.split(\",\"),await this.resolveRelations(t,e)),[\"1\",\"story\",\"url\"].indexOf(e.resolve_links)>-1&&await this.resolveLinks(t,e),this.resolveNestedRelations)for(const t in this.relations)this.iterateTree(this.relations[t],r);t.story?this.iterateTree(t.story,r):t.stories.forEach((t=>{this.iterateTree(t,r)}))}cacheResponse(t,e,r){return void 0===r&&(r=0),new Promise((async(s,n)=>{let i=a({url:t,params:e}),o=this.cacheProvider();if(\"auto\"===this.cache.clear&&\"draft\"===e.version&&await this.flushCache(),\"published\"===e.version&&\"/cdn/spaces/me\"!=t){const t=await o.get(i);if(t)return s(t)}try{let r=await this.throttle(\"get\",t,{params:e,paramsSerializer:t=>a(t)}),l={data:r.data,headers:r.headers};if(r.headers[\"per-page\"]&&(l=Object.assign({},l,{perPage:parseInt(r.headers[\"per-page\"]),total:parseInt(r.headers.total)})),200!=r.status)return n(r);(l.data.story||l.data.stories)&&await this.resolveStories(l.data,e),\"published\"===e.version&&\"/cdn/spaces/me\"!=t&&o.set(i,l),l.data.cv&&(\"draft\"==e.version&&c[e.token]!=l.data.cv&&this.flushCache(),c[e.token]=l.data.cv),s(l)}catch(i){if(i.response&&429===i.response.status&&(r+=1)<this.maxRetries)return console.log(`Hit rate limit. Retrying in ${r} seconds.`),await(l=1e3*r,new Promise((t=>setTimeout(t,l)))),this.cacheResponse(t,e,r).then(s).catch(n);n(i)}var l}))}throttledRequest(t,e,r){return this.client[t](e,r)}cacheVersions(){return c}cacheVersion(){return c[this.accessToken]}setCacheVersion(t){this.accessToken&&(c[this.accessToken]=t)}cacheProvider(){return\"memory\"===this.cache.type?{get:t=>l[t],getAll:()=>l,set(t,e){l[t]=e},flush(){l={}}}:{get(){},getAll(){},set(){},flush(){}}}async flushCache(){return await this.cacheProvider().flush(),this}}export{h as default};\n"]},"metadata":{},"sourceType":"module"}